# This file and all contents in it are OPTIONAL.

# The namespace this chart will be installed to,
# if not specified the chart will be installed to "default"
namespace: openldap-system

# Custom helm options
helm:
  # The release name to use. If empty a generated release name will be used
  releaseName: openldap

  # The directory of the chart in the repo.  Also any valid go-getter supported
  # URL can be used there is specify where to download the chart from.
  # If repo below is set this value if the chart name in the repo
  chart: ""

  # An https to a valid Helm repository to download the chart from
  repo: ""

  # Used if repo is set to look up the version of the chart
  version: ""

  # Force recreate resource that can not be updated
  force: false

  # How long for helm to wait for the release to be active. If the value
  # is less that or equal to zero, we will not wait in Helm
  timeoutSeconds: 0

  # Custom values that will be passed as values.yaml to the installation
  values:
    replicaCount: 1
    strategy:
      type: Recreate
      rollingUpdate: null
    image:
      # From repository https://github.com/osixia/docker-openldap
      repository: osixia/openldap
      tag: "latest"
      pullPolicy: IfNotPresent
    service:
      ldapPort: 389
      type: ClusterIP
    env:
      LDAP_ORGANISATION: "Marms Home"
      LDAP_DOMAIN: "marms.duckdns.org"
      LDAP_BACKEND: "mdb"
      LDAP_TLS: "true"
      LDAP_TLS_ENFORCE: "false"
      LDAP_REMOVE_CONFIG_AFTER_SETUP: "true"
    persistence:
      enabled: true
      accessMode: ReadWriteOnce
      size: 8Gi
    logLevel: info
    customLdifFiles:
      initial-ous.ldif: |-
        dn: ou=People,dc=keycloak,dc=live,dc=marms,dc=co,dc=snoho
        objectClass: organizationalUnit
        ou: People

        dn: ou=Group,dc=keycloak,dc=live,dc=marms,dc=co,dc=snoho
        objectClass: organizationalUnit
        ou: Group
